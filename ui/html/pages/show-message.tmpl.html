{{define "title"}}Your message{{end}}

{{define "main"}}

<div id="show-msg" class="show-msg">
    <div class="card load-msg-form">
        <div class="card-header">
            <h2 class="card-title">Secure Message</h2>
            <p class="card-description">Enter your PIN to decrypt and view the message</p>
        </div>
        
        <form hx-post="/load-message" hx-swap="outerHTML" hx-target=".card" id="load-msg-form">
            <input type="hidden" name="key" id="key" value="{{.Form.Key}}" />

            <div class="form-group">
                <label for="pin">Enter 5-digit PIN</label>
                <input type="text"
                       name="pin"
                       id="pin"
                       class="pin-input {{if .Form.FieldErrors.pin}}error-input{{end}}"
                       required
                       maxlength="5"
                       inputmode="numeric"
                       pattern="[0-9]{5}"
                       placeholder="•••••"
                       title="PIN must be exactly 5 digits"
                       aria-label="5-digit PIN"
                       autofocus />
                {{with .Form.FieldErrors.pin}}
                <span class='error'>{{.}}</span>
                {{end}}
            </div>
            
            <button class="main-btn"
                    type="submit">
                Decode Message
            </button>
        </form>
    </div>
</div>
{{end}}