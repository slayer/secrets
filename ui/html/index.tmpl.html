{{define "base"}}
    <!DOCTYPE html>
    <html lang="en" {{if ne .Theme "auto"}}data-theme="{{.Theme}}"{{end}}>
    <head>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
        <title>{{template "title" .}} - Safe Secrets</title>
        <link rel='stylesheet' href='/static/css/bootstrap-grid.css'>
        <link rel='stylesheet' href='/static/css/main.css'>
        <link rel='shortcut icon' href='/static/img/favicon.ico' type='image/x-icon'>
        <link rel="preconnect" href="https://fonts.googleapis.com">
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;500;600;700&display=swap" rel="stylesheet">
    </head>
    <body hx-boost="true" hx-ext="response-targets">
    <div id="notifications" class="toast-container"></div>
    <div class="app">
        <button hx-post="/theme" 
                hx-trigger="click"
                id="theme-toggle" 
                class="theme-toggle" 
                aria-label="Toggle theme">
            <svg id="theme-icon" width="28" height="28" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                {{if eq .Theme "auto"}}
                <!-- auto mode icon -->
                <rect x="3" y="4" width="18" height="12" rx="2" stroke="currentColor" stroke-width="2" fill="none"/>
                <path d="M8 21h8M12 17v4" stroke="currentColor" stroke-width="2"/>
                {{else if eq .Theme "dark"}}
                <!-- sun icon (shown in dark mode, click to go light) -->
                <circle cx="12" cy="12" r="4" fill="currentColor"/>
                <path d="M12 2v2M12 20v2M4.93 4.93l1.41 1.41M17.66 17.66l1.41 1.41M2 12h2M20 12h2M6.34 17.66l-1.41 1.41M17.66 6.34l1.41-1.41" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
                {{else}}
                <!-- moon icon (shown in light mode, click to go dark) -->
                <path d="M21 12.79C20.25 13.5 19.2 14 18 14C15.79 14 14 12.21 14 10C14 8.8 14.5 7.75 15.21 7C15.14 7 15.07 7 15 7C11.69 7 9 9.69 9 13S11.69 19 15 19S21 16.31 21 13C21 12.93 21 12.86 21 12.79Z" fill="currentColor"/>
                {{end}}
            </svg>
        </button>
        
        <div class="app-container">
            <div class="logo-title">
                <a href='/' class="logo-link">
                    <span class="app-name">Safe Secrets</span>
                </a>
            </div>

            <main class="main-content">
                {{template "main" .}}
            </main>

            <div class="app-footer">
                <a href="/about" class="footer-link">How it works</a>
                <span class="separator">•</span>
                <a href="https://github.com/umputun/secrets" class="footer-link">Source code</a>
                <span class="separator">•</span>
                <span class="copyright">© Umputun, {{.CurrentYear}}</span>
            </div>
        </div>
    </div>

    <div id="popup" class="popup">
        <div class="popup-content">
            <div class="popup-header">
                <div></div>
                <button id="close-popup" class="close-popup" data-close-popup>
                    <img src="/static/img/close.svg" alt="close" />
                </button>
            </div>
            <div class="popup-text">
            </div>
        </div>
    </div>

    <script src="https://unpkg.com/htmx.org@2.0.3" crossorigin="anonymous"></script>
    <script src="https://unpkg.com/htmx-ext-response-targets@2.0.1/response-targets.js"></script>
    <script src='/static/js/main.js'></script>
    </body>
    </html>
{{end}}